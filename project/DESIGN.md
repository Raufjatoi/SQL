# Design Document
**By Abdul Rauf**

**Video overview**: [YouTube Link](https://www.youtube.com/watch?v=mkdfGgAah1A)

## Scope

### Purpose of the Database

The primary purpose of this database is to manage user information, medical records, and disease prediction results for a health prediction application. The application aims to provide users with personalized health insights, predictions regarding potential health risks, and recommendations based on their historical medical data. To achieve this, a robust and scalable database is necessary to store, organize, and retrieve data efficiently. This database serves as the backbone for the application's functionality, supporting a seamless and responsive user experience.

### Included in Scope

The database will encompass the following elements:

1. **User Information**: This includes essential details like user ID, username, email, and other personal identifiers that help uniquely recognize each user in the system.
2. **Medical Information**: Users will be able to input their medical history, allergies, ongoing medications, and other relevant health details.
3. **Prediction Results**: The system will generate health-related predictions, such as potential diseases or conditions, with a confidence score representing the model's certainty. These predictions are stored for users to access, track, and evaluate.
4. **Medical History Events**: The database will keep a log of significant health events, such as surgeries, hospital visits, vaccinations, or any other relevant health milestones that a user records.

### Outside of Scope

The following elements are considered out of scope for this database:

1. **External Health Databases**: The database will not directly integrate with external health databases (like those from hospitals or government agencies) to prevent privacy violations and ensure compliance with data protection regulations.
2. **Unverified Medical Data**: Data that has not been verified or validated, such as user-generated content without medical backing, will not be stored to maintain the integrity of the database.
3. **Non-Health-Related User Information**: Any user information that is not directly related to their health or medical conditions (e.g., social media profiles, lifestyle habits outside the context of health) will not be stored in the database.

## Functional Requirements

### User Capabilities

The database must provide several capabilities to end-users to ensure a comprehensive and user-friendly experience:

1. **Data Storage**: Users should be able to securely store their personal information (such as name, email, age) and medical data, including past diagnoses, treatments, allergies, and ongoing medications. This will allow for the creation of a personalized health profile.
2. **Viewing Prediction Results**: Users should be able to view their health prediction results generated by the application. These results will indicate potential diseases or conditions and provide a confidence score that reflects the accuracy level of each prediction.
3. **Tracking Medical History**: Users should be able to access and review their recorded medical events. The database will support detailed logs of significant medical occurrences, such as surgeries, hospitalizations, or therapy sessions.
4. **Data Privacy and Security**: The database will enforce strict privacy protocols to ensure that each user can only view or access their data. Access to another user's data will be strictly prohibited to maintain confidentiality and comply with legal requirements.

### Beyond User Scope

The database design ensures that users will not have access to the following functionalities:

1. **Modifying Other Users' Data**: Users will not be permitted to modify or delete data belonging to other users. This prevents accidental or malicious alterations and maintains the integrity of personal health information.
2. **Access to Internal Configurations**: Users will not be able to view or alter the internal configurations of the database, including indexing strategies, optimizations, and schema definitions. These settings are reserved for database administrators to maintain optimal performance.

## Representation

### Entities

#### Chosen Entities

To represent the data effectively, the following entities have been chosen:

1. **USER**: Represents the individual using the health prediction application.
2. **INFO**: Stores detailed medical information for each user.
3. **PREDICTION**: Contains the results of health predictions generated by the application.
4. **HISTORY**: Tracks historical medical events related to each user.

#### Entity Attributes

1. **USER**:
   - `userID`: A unique identifier for each user.
   - `username`: The chosen name of the user.
   - `email`: The user's email address.

2. **INFO**:
   - `medicalHistory`: A text field or JSON object detailing the user's past medical conditions, diagnoses, and treatments.
   - `allergies`: A list or JSON object indicating known allergies.

3. **PREDICTION**:
   - `diseaseName`: The name of the predicted disease or condition.
   - `confidenceScore`: A numerical value representing the prediction model's confidence level (e.g., 0 to 100).

4. **HISTORY**:
   - `eventDate`: The date of the medical event.
   - `eventType`: The type of event (e.g., surgery, hospitalization, check-up).

#### Choice of Types

The chosen types for each attribute are selected to ensure efficient storage and retrieval. For example, `userID` is an integer type to allow quick indexing and retrieval. Text and JSON types are used for fields that may have varying lengths or require a flexible format (like `medicalHistory`). Numerical types (like `confidenceScore`) ensure that numerical operations, such as sorting or comparison, are efficient.

#### Choice of Constraints

Constraints play a crucial role in maintaining data integrity. For example:

1. **Unique Constraints**: Applied to `userID` and `email` to prevent duplicate entries and ensure each user is uniquely identifiable.
2. **Foreign Key Constraints**: `userID` is used as a foreign key in INFO, PREDICTION, and HISTORY tables to maintain relational integrity between the entities.
3. **Not Null Constraints**: Applied to critical fields like `userID`, `diseaseName`, and `eventDate` to ensure no essential data is missing.
4. **Data Type Constraints**: Ensure that each attribute holds data in the correct format, such as dates for `eventDate` or strings for `diseaseName`.

### Relationships

#### Entity Relationship Diagram (ERD)

The ERD represents a one-to-many relationship between the USER entity and each of the INFO, PREDICTION, and HISTORY entities:

- **USER to INFO**: One user can have multiple medical records.
- **USER to PREDICTION**: One user can have multiple health predictions over time.
- **USER to HISTORY**: One user can have multiple entries representing their medical history.

#### Relationship Descriptions

The relationships ensure that each user's data is correctly grouped and categorized. A USER entity can relate to multiple records in the INFO, PREDICTION, and HISTORY entities. This relationship structure allows the database to efficiently organize and retrieve data related to a specific user, supporting comprehensive data analysis and personalized health insights.

## Optimizations

### Indexes

Indexes are created on critical fields, such as `userID`, `diseaseName`, and `eventDate`. These indexes are designed to:

1. **Improve Query Performance**: Indexes enable faster searches and retrievals, particularly for frequently accessed data such as user details, medical history, and prediction results.
2. **Support Efficient Joins**: Indexes facilitate faster joins between tables, especially when linking USER with INFO, PREDICTION, or HISTORY records.

### Reason for Optimizations

The chosen optimizations are intended to enhance database performance, particularly in scenarios involving frequent reads, such as displaying user profiles, retrieving prediction results, and generating reports. These optimizations help minimize query response time and reduce server load.

## Limitations

### Design Limitations

The current design is tailored for user-specific medical data and predictions. However, there are several inherent limitations:

1. **Limited to User Data**: The design does not accommodate the complex relationships between different users or population-level health analysis.
2. **Simplified Medical Relationships**: Some intricate medical relationships or comorbidities might not be fully represented due to the simplified schema structure.

### Representation Limitations

The database design may struggle with:

1. **Real-Time Data Analysis**: The current design does not optimize for real-time analytics, such as immediate response to new data inputs or live health monitoring.
2. **Cross-User Comparisons**: Efficient comparisons of health trends or predictions across multiple users are limited due to the focus on user-specific data.

### Future Directions

Future iterations could expand the database to handle more complex medical data structures, support real-time analytics, and accommodate data from external health systems to create a more holistic health prediction ecosystem.
